{% extends 'app/base.html' %}
{% load static %}

{% block title %}{{ product.name }}{% endblock title %}
{% block main-content %}
<!--start product details-->
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <div class="card shadow-lg border-0 rounded-4 p-4 product-detail-card">
        <div class="row g-4 align-items-center">
          <div class="col-12 col-md-5 text-center">
            <div class="product-detail-img mx-auto mb-3">
              {% if product.image_url %}
                <img src="{{ product.image_url.url }}" alt="{{ product.name }}" class="img-fluid rounded-3 product-img-main">
              {% else %}
                <i class="fas fa-image fa-5x text-muted"></i>
              {% endif %}
            </div>
          </div>
          <div class="col-12 col-md-7">
            <div class="product-title mb-2">{{ product.name }}</div>
            <div class="product-meta mb-2">Category: <span>{{ product.category }}</span></div>
            <div class="product-price mb-2">₹{{ product.price }}</div>
            {% if product.stock > 0 %}
              <span class="badge-instock mb-2">In Stock</span>
            {% else %}
              <span class="badge-outstock mb-2">Out of Stock</span>
            {% endif %}
            <div class="product-actions d-flex gap-3 mb-3">
              <form method="post" action="{% url 'add_to_cart' product.product_id %}" class="flex-fill">
                {% csrf_token %}
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-success btn-ecomm w-100"><i class="bi bi-basket2"></i>Add to Cart</button>
              </form>
              <form method="post" action="{% url 'add_to_wishlist' product.product_id %}" class="flex-fill">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger btn-ecomm w-100"><i class="bi bi-suit-heart"></i>Wishlist</button>
              </form>
            </div>
            <div class="product-desc mb-3">
              <h5 class="fw-bold mb-2">Product Details</h5>
              <div>{{ product.description|linebreaksbr|default:"No description available for this product." }}</div>
            </div>
            <ul class="product-info-list list-unstyled">
              <li><strong>Product ID:</strong> #{{ product.product_id }}</li>
              <li><strong>Stock:</strong> {{ product.stock }}</li>
            </ul>
            <a href="{% url 'product_list' %}" class="btn btn-secondary back-link mt-3"><i class="fas fa-arrow-left"></i>Back to Products</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock main-content %}


        <style>
        .product-detail-hero {
          background: #fff;
          border-radius: 18px;
          box-shadow: 0 2px 16px 0 rgba(60,72,88,.10);
          padding: 2.5rem 2rem;
          margin-top: 2rem;
          margin-bottom: 2rem;
        }
        .product-detail-img {
          background: #f7f7f7;
          border-radius: 12px;
          padding: 1.2rem;
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: 120px;
          max-height: 140px;
          width: 100%;
          max-width: 140px;
        }
        .product-detail-img img {
          max-width: 220px;
          max-height: 220px;
          object-fit: contain;
          box-shadow: 0 2px 12px 0 rgba(60,72,88,.10);
        }
        .product-detail-info {
          padding-left: 2rem;
        }
        .product-title {
          font-size: 2.1rem;
          font-weight: 700;
          color: #2d8659;
          margin-bottom: 0.5rem;
        }
        .product-meta {
          color: #888;
          font-size: 1rem;
          margin-bottom: 0.5rem;
        }
        .product-price {
          font-size: 2rem;
          color: #1a7f37;
          font-weight: 700;
          margin-bottom: 1rem;
        }
        .badge-instock {
          background: #e6f4ea;
          color: #1a7f37;
          font-weight: 600;
          border-radius: 6px;
          padding: 0.4em 1em;
          margin-right: 0.5em;
        }
        .badge-outstock {
          background: #fbeaea;
          color: #d32f2f;
          font-weight: 600;
          border-radius: 6px;
          padding: 0.4em 1em;
          margin-right: 0.5em;
        }
        .product-actions {
          margin-top: 1.5rem;
          display: flex;
          gap: 1rem;
        }
        .product-actions form {
          display: inline;
        }
        .btn-ecomm {
          font-size: 1.1rem;
          padding: 0.7em 2em;
          border-radius: 8px;
          font-weight: 600;
          transition: background 0.2s, color 0.2s;
        }
        .btn-ecomm i {
          margin-right: 0.5em;
        }
        .product-desc {
          margin-top: 2rem;
          font-size: 1.1rem;
          color: #444;
          line-height: 1.7;
        }
        .product-info-list {
          margin-top: 2rem;
          background: #f8f9fa;
          border-radius: 10px;
          padding: 1.5rem 1rem;
          font-size: 1rem;
        }
        .back-link {
          margin-top: 2.5rem;
          display: inline-block;
        }
        .back-link i {
          margin-right: 0.5em;
        }
        @media (max-width: 991px) {
          .product-detail-hero { flex-direction: column; padding: 1.5rem 0.5rem; }
          .product-detail-info { padding-left: 0; margin-top: 2rem; }
        }
        </style>

<div class="product-detail-hero mx-auto d-flex flex-wrap align-items-start justify-content-center" style="max-width: 950px; margin: 40px auto 60px auto;">
  <div class="col-12 col-md-6 mb-4 mb-md-0" style="min-width:320px;">
    <div class="product-detail-img">
      {% if product.image_url %}
        <img src="{{ product.image_url.url }}" alt="{{ product.name }}">
      {% else %}
        <i class="fas fa-image fa-5x text-muted"></i>
      {% endif %}
    </div>
  </div>
  <div class="col-12 col-md-6 product-detail-info" style="min-width:320px;">
    <div class="product-title">{{ product.name }}</div>
    <div class="product-meta">Category: <span>{{ product.category }}</span></div>
    <div class="product-price">₹{{ product.price }}</div>
    {% if product.stock > 0 %}
      <span class="badge-instock">In Stock</span>
    {% else %}
      <span class="badge-outstock">Out of Stock</span>
    {% endif %}
    <div class="product-actions">
      <form method="post" action="{% url 'add_to_cart' product.product_id %}">
        {% csrf_token %}
        <input type="hidden" name="quantity" value="1">
        <button type="submit" class="btn btn-success btn-ecomm"><i class="bi bi-basket2"></i>Add to Cart</button>
      </form>
      <form method="post" action="{% url 'add_to_wishlist' product.product_id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-danger btn-ecomm"><i class="bi bi-suit-heart"></i>Wishlist</button>
      </form>
    </div>
    <div class="product-desc">
      <h5 class="fw-bold mb-2">Product Details</h5>
      <div>{{ product.description|linebreaksbr|default:"No description available for this product." }}</div>
    </div>
    <ul class="product-info-list list-unstyled">
      <li><strong>Product ID:</strong> #{{ product.product_id }}</li>
      <li><strong>Stock:</strong> {{ product.stock }}</li>
    </ul>
    <a href="{% url 'product_list' %}" class="btn btn-secondary back-link"><i class="fas fa-arrow-left"></i>Back to Products</a>
  </div>
</div>

