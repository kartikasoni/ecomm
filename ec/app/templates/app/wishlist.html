{% extends "app/base.html" %}
{% load static %}

{% block title %}Your Wishlist{% endblock title %}

{% block main-content %}

<!--start page content-->
<div class="page-content">

   <!--start breadcrumb-->
   <div class="py-4 border-bottom">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0"> 
          <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
          <li class="breadcrumb-item"><a href="{% url 'product_list' %}">Shop</a></li>
          <li class="breadcrumb-item active" aria-current="page">Wishlist</li>
        </ol>
      </nav>
    </div>
   </div>
   <!--end breadcrumb-->

   <!--start product wishlist-->
   <section class="section-padding">
    <div class="container">

      <div class="d-flex align-items-center px-3 py-2 border mb-4">
        <div class="text-start">
          <h4 class="mb-0 h4 fw-bold">Wishlist 
            ({% if wishlist_items %}{{ wishlist_items|length }} Items{% else %}0 Items{% endif %})
          </h4>
        </div>
        <div class="ms-auto">
          <a href="{% url 'product_list' %}" class="btn btn-light btn-ecomm">Continue To Shop</a>
        </div>
      </div>

      <div class="similar-products">
        {% if wishlist_items %}
          <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xl-4 row-cols-xxl-5 g-4">

            {% for w in wishlist_items %}
            <div class="col">
              <div class="card rounded-0 position-relative">
                <a href="{% url 'remove_from_wishlist' w.id %}" 
                   class="btn-close wishlist-close position-absolute end-0 top-0"></a>
                
                <a href="{% url 'product_detail' w.product.product_id %}">
                  {% if w.product.image_url %}
                    <img src="{{ w.product.image_url.url }}" alt="{{ w.product.name }}" class="card-img-top-products rounded-0">
                  {% else %}
                    <img src="{% static 'app/images/no-image.png' %}" alt="No Image" class="card-img-top-products rounded-0">
                  {% endif %}
                </a>

                <div class="card-body border-top text-center">
                  <p class="mb-0 product-short-name">{{ w.product.name }}</p>
                  <div class="product-price d-flex align-items-center gap-2 mt-2 justify-content-center">
                    <div class="h6 fw-bold">₹{{ w.product.price }}</div>
                    {% if w.product.old_price %}
                      <div class="h6 fw-light text-muted text-decoration-line-through">₹{{ w.product.old_price }}</div>
                    {% endif %}
                    {% if w.product.discount %}
                      <div class="h6 fw-bold text-danger">({{ w.product.discount }}% off)</div>
                    {% endif %}
                  </div>
                </div>

                <div class="card-footer bg-transparent text-center">
                  <a href="{% url 'move_to_cart' w.id %}" class="btn btn-ecomm w-100">Move to Bag</a>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="alert alert-info text-center">Your wishlist is empty.</div>
          <div class="text-center">
            <a class="btn btn-primary" href="{% url 'product_list' %}">View Products</a>
          </div>
        {% endif %}
      </div>

    </div>
  </section>
   <!--end product wishlist-->

 </div>
<!--end page content-->

{% endblock main-content %}

