{% extends "app/base.html" %}
{% load static %}

{% block title %}Checkout{% endblock title %}

{% block main-content %}
<!--start page content-->
<div class="page-content">

   <!--start breadcrumb-->
   <div class="py-4 border-bottom">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0"> 
          <li class="breadcrumb-item"><a href="javascript:;">Home</a></li>
          <li class="breadcrumb-item"><a href="javascript:;">checkout</a></li>
          <li class="breadcrumb-item active" aria-current="page">Billing Details</li>
        </ol>
      </nav>
    </div>
   </div>

    {% if cart_items %}
 <section class="section-padding">
    <div class="container">
      <div class="d-flex align-items-center px-3 py-2 border mb-4">
        <div class="text-start">
          <h4 class="mb-0 h4 fw-bold">Billing Details</h4>
       </div>
      </div>
	   <div class="row g-4">
         <div class="col-12 col-lg-8 col-xl-8">
        <h6 class="fw-bold mb-3 py-2 px-3 bg-light">Personal Details</h6>
        <!-- Address / payment form -->
            <form method="post" action="{% url 'place_order' %}">
                  {% csrf_token %}
        <div class="card rounded-0 mb-3">
			  <div class="card-body">
			    <div class="row g-3">
             <div class="col-12 col-lg-6">
              <div class="form-floating">
                <input type="text" class="form-control rounded-0" id="floatingFirstName" placeholder="First Name" required>
                <label for="floatingFirstName">First Name</label>
              </div>
              </div>
               <div class="col-12 col-lg-6">
              <div class="form-floating">
                <input type="text" class="form-control rounded-0" id="floatingFirstName" placeholder="Last Name" required>
                <label for="floatingFirstName">Last Name</label>
              </div>
              </div>
 <div class="col-12 col-lg-6">
              <div class="form-floating">
                <input type="text" class="form-control rounded-0" id="floatingEmail" placeholder="Email" value="{{ user.email }}" required>>
                <label for="floatingEmail">Email</label>
              </div>
             </div>
                 
            <div class="col-12 col-lg-6">
              <div class="form-floating">
                <input type="text" class="form-control rounded-0" id="floatingMobileNo" placeholder="Mobile No"required>
                <label for="floatingMobileNo">Mobile No</label>
              </div>
             </div>
                   </div>
                   </div>
                   </div>   

                    <h6 class="fw-bold mb-3 py-2 px-3 bg-light">Shipping Details</h6>
		    <div class="card rounded-0">
			  <div class="card-body">
          <div class="row g-3">
            <div class="col-12 col-lg-12">
             <div class="form-floating">
               <input type="text" class="form-control rounded-0" id="floatingStreetAddress" placeholder="Street Address" required>
               <label for="floatingStreetAddress">Street Address</label>
             </div>
            </div>
            <div class="col-12 col-lg-4">
             <div class="form-floating">
               <input type="text" class="form-control rounded-0" id="floatingZipCode" placeholder="Zip Code" required>
               <label for="floatingZipCode">Zip Code</label>
             </div>
            </div>
            <div class="col-12 col-lg-4">
             <div class="form-floating">
               <input type="text" class="form-control rounded-0" id="floatingCity" placeholder="City" required>
               <label for="floatingCity">City</label>
             </div>
            </div>
            <div class="col-12 col-lg-4">
             <div class="form-floating">
               <input type="text" class="form-control rounded-0" id="floatingCountry" placeholder="Country" required>
               <label for="floatingCountry">Country</label>
             </div>
            </div>
         </div><!--end row-->
			  </div>
			</div> 

                    <div class="col-12">
                        <label class="form-label">Payment Method</label>
                        <select class="form-select" name="payment_method" required>
                            <option value="cod">Cash on Delivery</option>
                            <option value="online">Online Payment</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-success mt-3" type="submit">Place Order</button>
            </form>
        </div>

        <!-- Summary -->
        <div class="col-lg-5 mt-4 mt-lg-0">
            <div class="card">
                <div class="card-header">Order Summary</div>
                <div class="card-body">
                    {% for item in cart_items %}
                        <div class="d-flex justify-content-between">
                            <div>{{ item.product.name }} × {{ item.quantity }}</div>
                            <div>₹ {{ item.subtotal }}</div>
                        </div>
                    {% endfor %}
                    <hr>
                    <div class="d-flex justify-content-between fw-bold">
                        <div>Total</div>
                        <div>₹ {{ total }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% else %}
        <div class="alert alert-warning">Your cart is empty. Add items before checkout.</div>
        <a class="btn btn-primary" href="{% url 'product_list' %}">Shop now</a>
    {% endif %}
</div>
{% endblock main-content %}
